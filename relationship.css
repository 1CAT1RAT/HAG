/* MATRIX */
.chart {
  display:grid;
  grid-template-columns: minmax(120px, 220px) repeat(var(--count), var(--cell-size));
  gap:10px;
  padding:12px;
  justify-content:flex-start;
  align-items:start;
  animation: chartFadeIn 0.6s ease-out;
  width:100%;
  overflow:auto;
}

@keyframes chartFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* make grid adapt on small screens */
@media (max-width: 900px) {
  .chart {
    grid-template-columns: minmax(100px, 160px) repeat(var(--count), minmax(40px, var(--cell-size)));
    gap:8px;
    padding:10px;
  }
  .name { width: 140px; }
}

/* headers */
.header {
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  width:var(--cell-size); text-align:center; padding:8px 2px;
  word-wrap:break-word;
  transition: all 0.3s ease;
  cursor: pointer;
  border-radius: 6px;
  border: 1px solid #a0a0a0;
  background: #e8e8e8;
}
.header:hover {
  transform: translateY(-2px);
  border-color: #707070;
  background: #f0f0f0;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}
.header img{ 
  width:70%; 
  height:70%; 
  object-fit:contain; 
  margin-bottom:4px; 
  transition: all 0.3s ease;
  filter: drop-shadow(0 0 2px rgba(43, 43, 43, 0.2));
}
.header:hover img {
  filter: drop-shadow(0 0 6px rgba(0, 0, 0, 0.15));
  transform: scale(1.08);
}
.header span{ 
  font-size:10px; 
  overflow:hidden; 
  text-overflow:ellipsis; 
  white-space:nowrap;
  transition: all 0.3s ease;
  color: #404040;
  font-family: 'Courier New', Courier, monospace;
}
.header.glow {
  background: #f5f5f5;
  border-color: #505050;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);
}
.header.glow span {
  color: #202020;
  text-shadow: 0 0 4px rgba(0, 0, 0, 0.1);
}

/* row headers */
.name {
  display:flex; align-items:center; gap:8px;
  width:160px; height:var(--cell-size);
  text-overflow:ellipsis; overflow:hidden; white-space:nowrap;
  padding: 8px;
  border-radius: 6px;
  transition: all 0.3s ease;
  border: 1px solid #a0a0a0;
  cursor: pointer;
  background: #e8e8e8;
}
.name:hover {
  background: #f0f0f0;
  border-color: #707070;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}
.name img{ 
  width: calc(var(--cell-size)*0.5); 
  height: calc(var(--cell-size)*0.5); 
  object-fit:contain;
  transition: all 0.3s ease;
  filter: drop-shadow(0 0 2px rgba(48, 48, 48, 0.2));
}
.name:hover img {
  filter: drop-shadow(0 0 6px rgba(0, 0, 0, 0.15));
}
.name span{ 
  font-size:12px; 
  overflow:hidden; 
  text-overflow:ellipsis;
  transition: all 0.3s ease;
  color: #404040;
  font-family: 'Courier New', Courier, monospace;
}
.name.glow {
  background: #f5f5f5;
  border-color: #505050;
  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.08);
}
.name.glow span {
  color: #202020;
}

/* cells */
.cell{ 
  width:var(--cell-size); 
  height:var(--cell-size); 
  border-radius:6px; 
  cursor:pointer; 
  transition: all 0.25s cubic-bezier(0.22, 1, 0.36, 1);
  border: 1px solid rgba(100, 100, 100, 0.3);
  position: relative;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
}
.cell:hover{ 
  transform: scale(1.15);
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.3);
  border-color: rgba(80, 80, 80, 0.6);
}

.glow{ 
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  border-color: rgba(80, 80, 80, 0.8);
}

.muted { opacity: 0.4; transition: opacity 0.2s ease; }
.dim { opacity: 0.12; transition: opacity 0.25s ease; }

/* prevent hover transforms on dimmed/muted cells */
.dim:hover, .muted:hover { transform: none; box-shadow: none !important; border-color: rgba(100, 100, 100, 0.3) !important; }

/* relationship card */
#relationshipCard {
  position: fixed; bottom:40px; left:50%;
  transform: translateX(-50%) scale(0) translateY(20px);
  background: #e8e8e8;
  color: #404040;
  padding: 20px 28px;
  border-radius: 8px; 
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.5);
  font-size: 14px; 
  text-align:center;
  pointer-events:none; 
  transition: all 0.35s cubic-bezier(0.22, 1, 0.36, 1);
  z-index:10000;
  border: 2px solid #a0a0a0;
  backdrop-filter: blur(4px);
  font-family: 'Courier New', Courier, monospace;
}
#relationshipCard strong {
  font-size: 16px;
  letter-spacing: 1px;
  color: #202020;
  text-shadow: 0 0 4px rgba(0, 0, 0, 0.08);
  font-family: 'Courier New', Courier, monospace;
}
#relationshipCard.show{
  transform: translateX(-50%) scale(1) translateY(0);
  pointer-events:auto;
  opacity:1;
}

/* RELATIONSHIP COLORS */
.cell[data-rel="0"]{ background: linear-gradient(135deg,#5a5a6a,#1a1a2a); }
.cell[data-rel="1"]{ background: linear-gradient(135deg,#ff61ea,#ff006f); box-shadow: inset 0 0 10px rgba(148, 0, 0, 0.308); }
.cell[data-rel="2"]{ background: linear-gradient(135deg,#4bd43e,#00c500); box-shadow: inset 0 0 10px rgba(7, 85, 0, 0.322); }
.cell[data-rel="3"]{ background: linear-gradient(135deg,#ffe252,#ffbb00); box-shadow: inset 0 0 10px rgba(126, 71, 0, 0.308); }
.cell[data-rel="4"]{ background: linear-gradient(135deg,#ffaf54,#ff7b00); box-shadow: inset 0 0 10px rgba(119, 34, 0, 0.274); }
.cell[data-rel="5"]{ background: linear-gradient(135deg,#ff3434,#ee010d); box-shadow: inset 0 0 10px rgba(83, 0, 0, 0.315); }

/* Exempt the chart from the global grayscale so relationship colors remain intact */
.chart, .chart * {
  filter: none !important;
}